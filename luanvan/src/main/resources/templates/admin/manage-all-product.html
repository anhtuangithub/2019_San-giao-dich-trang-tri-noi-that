<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/parts/layout}">
<head>
<title>Sản phẩm</title>
<style>
	.custom-navtabs-color{
		color:blue;
	}
	.custom-navtabs-color:hover{
		color:#878787;
	}
</style>


<section layout:fragment="css">
    <link rel="stylesheet"
	th:href="@{/css/fileinput.css}">
	<link rel="stylesheet"
	th:href="@{/css/theme.css}">
</section>
</head>
<body>
	<section layout:fragment="content">

		<div style="padding: 20px;">
			<h2>Quản lý sản phẩm</h2>
		</div>
		
		<div class="content " ng-controller="ProductAdminController">
		

			<div class="animated fadeIn">
				<div class="row">
					<div class="form-group" style="margin: 1rem">
						<label>Danh sách các nhà bán hàng</label> 
						<select class="form-control selectpicker" data-live-search="true" data-actions-box="true" ng-model="store.id" ng-options="store.id as store.name for store in listStore" ng-change="chooseStore(store.id)" required></select>
					</div>
					<div class="col-md-12">
						<div class="card">
							<div class="card-header">
								<strong class="card-title">Danh sách sản phẩm</strong>
							</div>
							<div class="card-body">
								<table id="bootstrap-data-table-export"
									class="table table-bordered table-hover text-center"
									dt-options="dtOptions" dt-columns="dtColumns" datatable="ng"
									>
									<thead class="thead-light">
										<tr>
											<th>Sản phẩm</th>
											<th>Hàng còn</th>
											<th>Giá Gốc</th>
											<th>Giá Bán</th>
											<th>Danh mục</th>
											<th>Ngày đăng</th>
											<th>Trạng thái</th>
											<th>Thao tác</th>
										</tr>
									</thead>
									<tbody>
									<!-- 	|filter:{product.categorys: filterReverse } -->
										<tr ng-repeat="product in listproduct "  id="tr_{{ product.id }}">
											<td>{{product.name}}</td>
											<td>{{product.inventory_number}}</td>
											<td>{{product.price| currency: "":0}} đ</td>
											<td>{{product.price_new| currency: "":0}} đ</td>
											<td>{{product.categorys.name}}</td>
											<td>{{product.created_at| date: "dd-MM-yyyy 'giờ' h:mma ":'UTC' }}</td>
											<td ng-if="product.status == 1"><span class="fa fa-unlock"></span></td>
											<td ng-if="product.status == 0"><span class="fa fa-lock" style="color:#bd2130"></span></td>
											<td style="width: 18%;">
												<button class="btn btn-outline-info" ng-click="frmCreateEdit_Show(product.id)" >
													<span class="fa fa-eye-slash"></span>
												</button>
												<button class="btn btn-outline-success" ng-click="modal('edit',product.id)" >
													<span class="fa fa-pencil"></span>
												</button>
												<button class="btn btn-outline-warning" ng-click="changeStatus(product.id,product.name)">
													<span class="fa fa-exchange"></span>
												</button>
											</td>
										</tr>

									</tbody>
								</table>
							</div>
						</div>
					</div>


				</div>
			</div>
			<!-- .animated -->


			<!-- Modal Add and Edit Product -->

			<div class="modal fade" id="myModal">
				<div class="modal-dialog modal-lg">
					<div class="modal-content">

						<!-- Modal Header -->
						<div class="modal-header">
							<h4 class="modal-title">{{ frmTitle }}</h4>
							<button type="button" class="close" data-dismiss="modal">×</button>

						</div>

						<!-- Modal body -->
						<div class="modal-body">
							<div class="col-md-12">
								<ul class="nav nav-tabs">
								    <li class="nav-item">
								    	<a class="nav-link active" data-toggle="tab" href="#home">Thông tin</a>
								    </li>
								    <li class="nav-item" >
								    	<a class="nav-link" data-toggle="tab" href="#menu4">Đơn giá</a>
								    </li>
								    <li class="nav-item" >
								    	<a class="nav-link" data-toggle="tab" href="#menu2">Ảnh</a>
								    </li>
								    <li class="nav-item">
								    	<a class="nav-link" data-toggle="tab" href="#menu3">Mô tả</a>
								    </li>
								</ul>
							</div>
							<form  method="post" name="frmPro" id="frmPro"	enctype="multipart/form-data">
							  	<div class="tab-content">
								   
								    <div id="home" class="tab-pane fade in active">
								      	<div class="col-md-6">
								      		<div class="form-group">
												<label>Danh mục của sản phẩm: <span class="help-block">*</span>:
												</label> 
												<input type="text"  ng-model="product.categorys.name" class="form-control"   id="categorys" readonly="true">
											</div>
											<div class="form-group">
												<label>Tên sản phẩm <span class="help-block">*</span>:
												</label> <input type="text" ng-model="product.name" 
													ng-required="true" class="form-control" id="name-product">
												<span id="helpBlock2" class="help-block"
													ng-show="frmPro.name.$touched && frmPro.name.$error.required">Vui
													lòng nhập tên sản phẩm</span>
											</div>
											<div class="form-group">
												<label>Số lượng <span class="help-block">*</span>:
												</label> 
												<input type="number" ng-model="product.quantity"
													class="form-control" id="quantity"  min="1">
											</div>
											<div class="form-group">
												<label>Xuất xứ <span class="help-block">*</span>:
												</label> 
												<select id="origin" ng-model="product.origins.id" class=" form-control"  data-live-search="true">
												  <option ng-repeat="origins in listorigins" ng-value="origins.id"  data-tokens="{{origins.name}}">{{origins.name}}</option>
												  
												</select>	
											</div>
											
										</div>

										<div class="col-md-6">
											<div class="form-group">
												<label>Nhà sản xuất <span class="help-block">*</span>:</label> 
												<select class="form-control" id="producer" 
													ng-model="product.producers.id">
													<option ng-repeat="producer in listproducers" ng-value="producer.id">{{producer.name}}</option>
												</select>
											</div>
											<div class="form-group">
												<label>Vật liệu <span class="help-block">*</span>:
												</label> <select class="form-control" id="material" 
													ng-model="product.materials.id" >
													<option ng-repeat="material in listmaterials" ng-value="material.id">{{material.name}}</option>
												</select>
											</div>
											<div class="form-group">
												<label>Màu sắc: <span class="help-block">*</span>:
												</label> 
												<select ng-model="colors" id="colors" name="colors" class="selectpicker form-control" multiple  data-live-search="true">
												  <option ng-repeat="color in listcolor" id="check_{{color.id}}" value="{{color.id}}"  data-tokens="{{color.name}}">{{color.name}}</option>
												  
												</select>	
											</div>
											
									
										</div>
								    </div>
								    <div id="menu4" class="tab-pane fade">
										<div class="row">
											<div class="col-md-6">
												<div class="form-group">
													<label>Giá gốc<span class="help-block">*</span>:</label> 
													<input type="number" ng-model="priceRoot.price"
														class="form-control" id="price" >
												</div>
											</div>
										</div>
								      	<table ng-if="product.id != null" class="table table-striped table-bordered text-center">
											<thead>
												<tr>
													<th>STT</th>
													<th>Giá</th>
													<th>Ngày bắt đầu</th>
													<th>Ngày áp dụng</th>
												</tr>
											</thead>
											<tbody>
												
												<tr ng-repeat="price in Prices">
													<td>{{$index + 1}}</td>
													<td>{{price.price| currency: "":0}} đ</td>
													<td>{{price.start_time| date: "dd-MM-yyyy 'giờ' h:mma ":'UTC' }}</td>
													<td>{{price.end_time| date: "dd-MM-yyyy 'giờ' h:mma ":'UTC' }}</td>
													
												</tr>

											</tbody>
										</table>
								    </div>
								    <div id="menu2" class="tab-pane fade">
								    	
								      	<div class="row" style="padding: 10px">
								      		<h5 style="text-align: center;">Ảnh đại diện sản phẩm</h5>
											<div class="col-md-6 offset-md-3">
												<img src="/img/uploads/{{product.avatar}}" alt="" id="image">
											</div>
								      	</div>

								      	<div class="row" style="padding: 10px">
								      		<h5 style="text-align: center;">Ảnh chi tiết sản phẩm</h5>
								      		<br>
								      		<div class="alert alert-primary" style="width: 100%" ng-if="listImage.length <= 0">Chưa có ảnh chi tiết sản phẩm</div>
								  			<div class="row-image" ng-if="listImage.length > 0" >
										    	<div class="column-image hover-shadow" ng-repeat="img in listImage" >
										      		<img ng-src="/img/uploads/{{img.path}}" alt="Image">
										    	</div>
											</div>
								      	</div>
								      	<div class="row" style="padding: 10px">	
								      		<h5>Ảnh 360</h5>
								      		<div class="alert alert-primary" style="width: 100%" ng-if="listImage360.length <= 0">Chưa có ảnh 360 của sản phẩm</div>
								      		<div class="col-md-12" style="padding: 1rem">
												<div id='mySpriteSpin'></div>
											</div>
								      	</div>
								    </div>
								    <div id="menu3" class="tab-pane fade">
							      		<div class="col-md-12">
										<div class="form-group">
											<label>Mô tả sản phẩm <span class="help-block">*</span>:</label>
											<textarea ng-model="product.description" class="form-control" name="description" id="description" ckeditor="editorOptions">
								    		</textarea>
										</div>
										</div>
								    	<div class="modal-footer">
											<button class="btn btn-warning" type="submit" ng-if="product.status == 0" ng-disabled="frmPro.$invalid"  ng-click="changeStatus(product.id,product.name)">Hiện sản phẩm</button>
											<button class="btn btn-danger" type="submit" ng-if="product.status == 1" ng-disabled="frmPro.$invalid"  ng-click="changeStatus(product.id,product.name)">Ẩn sản phẩm</button>
										</div>

								    </div>

								</div>
							</form>
						</div>

						<!-- Modal footer -->
						
					</div>
				</div>

			</div>
			<!-- .Modal Add and Edit Product -->

		</div>
		<!-- .content -->

	</section>
</body>

<section layout:fragment="script">
	 <script th:src="@{/js/spritespin.js}"></script>
    <script th:src="@{/js/angularjs/controller/ProductAdminController.js}"></script>

</section>
</html>
 





